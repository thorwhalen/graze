

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>graze.base &mdash; graze 0.1.33 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=4ae1632d" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=449df4d2"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../_static/toggleprompt.js?v=d7ede5d2"></script>
      <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="graze.migration_tools" href="migration_tools.html" />
    <link rel="prev" title="graze" href="../graze.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            graze
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../graze.html">graze</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">graze.base</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#graze.base.Gettable"><code class="docutils literal notranslate"><span class="pre">Gettable</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#graze.base.Graze"><code class="docutils literal notranslate"><span class="pre">Graze</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#graze.base.Graze.filepath_of"><code class="docutils literal notranslate"><span class="pre">Graze.filepath_of()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#graze.base.Graze.filepath_of_url_downloading_if_necessary"><code class="docutils literal notranslate"><span class="pre">Graze.filepath_of_url_downloading_if_necessary()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#graze.base.GrazeBase"><code class="docutils literal notranslate"><span class="pre">GrazeBase</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#graze.base.GrazeWithDataRefresh"><code class="docutils literal notranslate"><span class="pre">GrazeWithDataRefresh</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#graze.base.LocalFiles"><code class="docutils literal notranslate"><span class="pre">LocalFiles</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#graze.base.LocalGrazed"><code class="docutils literal notranslate"><span class="pre">LocalGrazed</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#graze.base.RequestFailure"><code class="docutils literal notranslate"><span class="pre">RequestFailure</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#graze.base.graze"><code class="docutils literal notranslate"><span class="pre">graze()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#graze.base.localpath_to_url"><code class="docutils literal notranslate"><span class="pre">localpath_to_url()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#graze.base.selenium_url_to_contents"><code class="docutils literal notranslate"><span class="pre">selenium_url_to_contents()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#graze.base.url_to_contents"><code class="docutils literal notranslate"><span class="pre">url_to_contents</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#graze.base.url_to_contents.selenium_chrome"><code class="docutils literal notranslate"><span class="pre">url_to_contents.selenium_chrome()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#graze.base.url_to_contents.selenium_firefox"><code class="docutils literal notranslate"><span class="pre">url_to_contents.selenium_firefox()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#graze.base.url_to_contents.selenium_opera"><code class="docutils literal notranslate"><span class="pre">url_to_contents.selenium_opera()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#graze.base.url_to_contents.selenium_safari"><code class="docutils literal notranslate"><span class="pre">url_to_contents.selenium_safari()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#graze.base.url_to_file_download"><code class="docutils literal notranslate"><span class="pre">url_to_file_download()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#graze.base.url_to_filepath"><code class="docutils literal notranslate"><span class="pre">url_to_filepath()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#graze.base.url_to_localpath"><code class="docutils literal notranslate"><span class="pre">url_to_localpath()</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="migration_tools.html">graze.migration_tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="util.html">graze.util</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">graze</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">graze.base</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/module_docs/graze/base.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-graze.base">
<span id="graze-base"></span><h1>graze.base<a class="headerlink" href="#module-graze.base" title="Link to this heading"></a></h1>
<p>Base functionality</p>
<dl class="py class">
<dt class="sig sig-object py" id="graze.base.Gettable">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">graze.base.</span></span><span class="sig-name descname"><span class="pre">Gettable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/graze/base.html#Gettable"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graze.base.Gettable" title="Link to this definition"></a></dt>
<dd><p>Protocol for objects with __getitem__ method.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="graze.base.Graze">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">graze.base.</span></span><span class="sig-name descname"><span class="pre">Graze</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rootdir='/home/runner/graze'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source=&lt;graze.base.Internet</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key_ingress:</span> <span class="pre">~collections.abc.Callable</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_filepaths:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/graze/base.html#Graze"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graze.base.Graze" title="Link to this definition"></a></dt>
<dd><p>A data access object that will get data from the internet if it’s not
already stored locally.</p>
<p>The interface of <code class="docutils literal notranslate"><span class="pre">Graze</span></code> instances is a <code class="docutils literal notranslate"><span class="pre">typing.Mapping</span></code> (i.e. <code class="docutils literal notranslate"><span class="pre">dict</span></code>-like).
When you list (or iterate over) keys, you’ll get the urls
whose contents are stored locally.
When you get a value, you’ll get the contents of the url (in bytes).
<code class="docutils literal notranslate"><span class="pre">Graze</span></code> will first look if the contents are stored locally, and return that,
if not it will get the contents from the internet and store it locally,
then return those bytes.</p>
<p>This class now extends GrazeBase and delegates most work to the graze() function.</p>
<dl class="py method">
<dt class="sig sig-object py" id="graze.base.Graze.filepath_of">
<span class="sig-name descname"><span class="pre">filepath_of</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../../_modules/graze/base.html#Graze.filepath_of"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graze.base.Graze.filepath_of" title="Link to this definition"></a></dt>
<dd><p>Get the filepath of where graze stored (or would store) the contents for a url locally.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graze.base.Graze.filepath_of_url_downloading_if_necessary">
<span class="sig-name descname"><span class="pre">filepath_of_url_downloading_if_necessary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/graze/base.html#Graze.filepath_of_url_downloading_if_necessary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graze.base.Graze.filepath_of_url_downloading_if_necessary" title="Link to this definition"></a></dt>
<dd><p>Get the file path for the url, downloading contents before hand if necessary.</p>
<p>Use case:</p>
<p>Sometimes you need to specify a filepath as a resource for some python object.
For example, some font definition file, or configuration file, or such.
You can provide the file for the user, or can tell them where they can find
such a file if needed…
Use <cite>filepath_of_url_downloading_if_necessary</cite> to get that local filepath,
ensuring that the data is there before hand.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="graze.base.GrazeBase">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">graze.base.</span></span><span class="sig-name descname"><span class="pre">GrazeBase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">cache:</span> <span class="pre">str</span> <span class="pre">|</span> <span class="pre">~collections.abc.MutableMapping</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">*,</span> <span class="pre">source:</span> <span class="pre">~collections.abc.Callable</span> <span class="pre">|</span> <span class="pre">~graze.base.Gettable</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">key_ingress:</span> <span class="pre">~collections.abc.Callable</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">url_to_cache_key:</span> <span class="pre">~collections.abc.Callable[[str],</span> <span class="pre">str]</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">url_to_localpath&gt;,</span> <span class="pre">cache_key_to_url:</span> <span class="pre">~collections.abc.Callable[[str],</span> <span class="pre">str]</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">localpath_to_url&gt;,</span> <span class="pre">refresh:</span> <span class="pre">bool</span> <span class="pre">|</span> <span class="pre">~collections.abc.Callable</span> <span class="pre">=</span> <span class="pre">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/graze/base.html#GrazeBase"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graze.base.GrazeBase" title="Link to this definition"></a></dt>
<dd><p>Base class for Graze that wraps the graze() function.</p>
<p>This class provides a MutableMapping interface (dict-like) where:
- Keys are URLs
- Values are the contents of those URLs (bytes)
- Items are cached locally (in folder, Files, or dict)</p>
<p>The key design principle: All actual work is delegated to the graze() function.
This class just provides the Mapping interface and state management.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cache</strong> – Where to cache contents. Can be:
- str: folder path for file-based caching
- MutableMapping: custom cache (e.g., Files, dict)
- None: uses DFLT_GRAZE_DIR</p></li>
<li><p><strong>source</strong> – Where to get contents if not cached. Defaults to Internet().</p></li>
<li><p><strong>key_ingress</strong> – Function to call on URL before downloading.</p></li>
<li><p><strong>url_to_cache_key</strong> – Function to convert URL to cache key.
Defaults to url_to_localpath.</p></li>
<li><p><strong>cache_key_to_url</strong> – Function to convert cache key back to URL.
Defaults to localpath_to_url.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># With folder cache (default)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">GrazeBase</span><span class="p">(</span><span class="n">cache</span><span class="o">=</span><span class="s1">&#39;~/my_cache&#39;</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">content</span> <span class="o">=</span> <span class="n">g</span><span class="p">[</span><span class="s1">&#39;http://example.com/data.json&#39;</span><span class="p">]</span>  
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># With Files cache</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">dol</span><span class="w"> </span><span class="kn">import</span> <span class="n">Files</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">GrazeBase</span><span class="p">(</span><span class="n">cache</span><span class="o">=</span><span class="n">Files</span><span class="p">(</span><span class="s1">&#39;~/cache&#39;</span><span class="p">))</span>  
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># With dict cache (in-memory)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">GrazeBase</span><span class="p">(</span><span class="n">cache</span><span class="o">=</span><span class="p">{})</span>  
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="graze.base.GrazeWithDataRefresh">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">graze.base.</span></span><span class="sig-name descname"><span class="pre">GrazeWithDataRefresh</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rootdir='/home/runner/graze'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source=&lt;graze.base.Internet</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key_ingress:</span> <span class="pre">~collections.abc.Callable</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_filepaths:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/graze/base.html#GrazeWithDataRefresh"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graze.base.GrazeWithDataRefresh" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="graze.base.LocalFiles">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">graze.base.</span></span><span class="sig-name descname"><span class="pre">LocalFiles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rootdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/home/runner/graze'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/graze/base.html#LocalFiles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graze.base.LocalFiles" title="Link to this definition"></a></dt>
<dd><p>Store to read/write/delete local files, creating directories on write.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="graze.base.LocalGrazed">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">graze.base.</span></span><span class="sig-name descname"><span class="pre">LocalGrazed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rootdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/home/runner/graze'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/graze/base.html#LocalGrazed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graze.base.LocalGrazed" title="Link to this definition"></a></dt>
<dd><p>LocalFiles using url as keys</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="graze.base.RequestFailure">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">graze.base.</span></span><span class="sig-name descname"><span class="pre">RequestFailure</span></span><a class="reference internal" href="../../_modules/graze/base.html#RequestFailure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graze.base.RequestFailure" title="Link to this definition"></a></dt>
<dd><p>To be used when the request to get the contents of a url failed</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="graze.base.graze">
<span class="sig-prename descclassname"><span class="pre">graze.base.</span></span><span class="sig-name descname"><span class="pre">graze</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">MutableMapping</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Callable</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#graze.base.Gettable" title="graze.base.Gettable"><span class="pre">Gettable</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key_ingress</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refresh</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Callable</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_age</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rootdir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_filepaths</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/graze/base.html#graze"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graze.base.graze" title="Link to this definition"></a></dt>
<dd><p>Get the contents of the url (persisting the results in a local file or cache,
for next time you’ll ask for it)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> – The url to download from</p></li>
<li><p><strong>cache</strong> – Where to store the contents. Can be:
- None: use DFLT_GRAZE_DIR as folder path (unless cache_key is full filepath)
- str: folder path for file-based caching
- MutableMapping: custom cache object (e.g., Files, dict)</p></li>
<li><p><strong>cache_key</strong> – The key to use in the cache. Can be:
- None: auto-generate using url_to_localpath
- str: explicit cache key (or full filepath if starts with / or ~)
- Callable: function to generate cache key from url</p></li>
<li><p><strong>source</strong> – Where to get the contents from if not cached. Can be:
- None: use default Internet() instance
- Callable: function that takes url and returns contents
- Gettable: object with __getitem__ method</p></li>
<li><p><strong>key_ingress</strong> – Function to call on the url before downloading.
Typically used to notify user that download is happening.</p></li>
<li><p><strong>refresh</strong> – Whether to re-download even if cached. Can be:
- bool: True to always refresh, False to use cache if available
- Callable: function(cache_key, url) -&gt; bool to decide dynamically</p></li>
<li><p><strong>max_age</strong> – If not None, number of seconds cached data is considered fresh.
If cached data is older, it will be re-downloaded. Cannot be used with refresh.</p></li>
<li><p><strong>return_key</strong> – If True, return the cache_key instead of contents.</p></li>
<li><p><strong>rootdir</strong> – (DEPRECATED) Use ‘cache’ instead. Folder path for caching.</p></li>
<li><p><strong>return_filepaths</strong> – (DEPRECATED) Use ‘return_key’ instead.</p></li>
</ul>
</dd>
</dl>
<p>Examples:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Basic usage - caches to default directory</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">content</span> <span class="o">=</span> <span class="n">graze</span><span class="p">(</span><span class="s1">&#39;http://example.com/data.json&#39;</span><span class="p">)</span>  
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Cache to specific folder</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">content</span> <span class="o">=</span> <span class="n">graze</span><span class="p">(</span><span class="s1">&#39;http://example.com/data.json&#39;</span><span class="p">,</span> <span class="n">cache</span><span class="o">=</span><span class="s1">&#39;~/my_cache&#39;</span><span class="p">)</span>  
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Cache to specific file (cache defaults to None automatically)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">content</span> <span class="o">=</span> <span class="n">graze</span><span class="p">(</span><span class="s1">&#39;http://example.com/data.json&#39;</span><span class="p">,</span> <span class="n">cache_key</span><span class="o">=</span><span class="s1">&#39;~/data/my_data.json&#39;</span><span class="p">)</span>  
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Use custom cache object</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">dol</span><span class="w"> </span><span class="kn">import</span> <span class="n">Files</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_cache</span> <span class="o">=</span> <span class="n">Files</span><span class="p">(</span><span class="s1">&#39;~/cache&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">content</span> <span class="o">=</span> <span class="n">graze</span><span class="p">(</span><span class="s1">&#39;http://example.com/data.json&#39;</span><span class="p">,</span> <span class="n">cache</span><span class="o">=</span><span class="n">my_cache</span><span class="p">,</span> <span class="n">cache_key</span><span class="o">=</span><span class="s1">&#39;data.json&#39;</span><span class="p">)</span>  
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Force refresh</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">content</span> <span class="o">=</span> <span class="n">graze</span><span class="p">(</span><span class="s1">&#39;http://example.com/data.json&#39;</span><span class="p">,</span> <span class="n">refresh</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Conditional refresh based on age</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">content</span> <span class="o">=</span> <span class="n">graze</span><span class="p">(</span><span class="s1">&#39;http://example.com/data.json&#39;</span><span class="p">,</span> <span class="n">max_age</span><span class="o">=</span><span class="mi">3600</span><span class="p">)</span>  
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="graze.base.localpath_to_url">
<span class="sig-prename descclassname"><span class="pre">graze.base.</span></span><span class="sig-name descname"><span class="pre">localpath_to_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../../_modules/graze/base.html#localpath_to_url"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graze.base.localpath_to_url" title="Link to this definition"></a></dt>
<dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">localpath_to_url</span><span class="p">(</span><span class="s1">&#39;http/www.example.com_f/subdir1_f/subdir2_f/file.txt&#39;</span><span class="p">)</span>
<span class="go">&#39;http://www.example.com/subdir1/subdir2/file.txt&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">localpath_to_url</span><span class="p">(</span><span class="s1">&#39;https://www.example.com_f/subdir1_f/subdir2_f/file.txt_f/&#39;</span><span class="p">)</span>
<span class="go">&#39;https:/www.example.com/subdir1/subdir2/file.txt/&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">localpath_to_url</span><span class="p">(</span><span class="s1">&#39;www.example.com/subdir1_f/subdir2_f/file.txt&#39;</span><span class="p">)</span>
<span class="go">&#39;www.example.com/subdir1/subdir2/file.txt&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="graze.base.selenium_url_to_contents">
<span class="sig-prename descclassname"><span class="pre">graze.base.</span></span><span class="sig-name descname"><span class="pre">selenium_url_to_contents</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url:</span> <span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">response_func=&lt;function</span> <span class="pre">_dflt_selenium_response_func&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">browser='Chrome'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/graze/base.html#selenium_url_to_contents"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graze.base.selenium_url_to_contents" title="Link to this definition"></a></dt>
<dd><p>Function to get contents from a url, using selenium.</p>
<p>To work, selenium needs to be installed an setup (browser drivers (default is
Chrome)).</p>
<p>See: <a class="reference external" href="https://selenium-python.readthedocs.io/">https://selenium-python.readthedocs.io/</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> – The url to fetch</p></li>
<li><p><strong>response_func</strong> – The function to call on browser object to return html.
The default is attrgetter(‘page_source’) which just returns the page_source
attribute. But a custom function can be specified to check for status first,
or wait a number of seconds, etc.</p></li>
<li><p><strong>browser</strong> – <p>If a string, will use it as a <cite>selenium.webdriver</cite> attribute.
It’s the user’s responsibility to have the necessary drivers for this to
work. When using a string, a browser is made and closed once the page is
fetched. This is inefficient if many pages need to be fetched.
To reuse the same browser, or a browser with specific properties, one
can specify a already made browser.</p>
<p>``
b = selenium.webdriver.Chrome(…)
my_selenium = functools.partial(url_to_contents.selenium, browser=b)
``</p>
<p>When doing so, the browser is made/opened when <code class="docutils literal notranslate"><span class="pre">b</span></code> is made, and
won’t be closed by <code class="docutils literal notranslate"><span class="pre">url_to_contents.selenium</span></code>.
It’s up to the user to close it (<code class="docutils literal notranslate"><span class="pre">b.close()</span></code>) when they don’t need it
anymore.</p>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="graze.base.url_to_contents">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">graze.base.</span></span><span class="sig-name descname"><span class="pre">url_to_contents</span></span><a class="reference internal" href="../../_modules/graze/base.html#url_to_contents"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graze.base.url_to_contents" title="Link to this definition"></a></dt>
<dd><p>A place to contain url_to_contents functions. Not meant to be intantiated.
The only reason for it’s existence is to make it easier for a user to choose
available url_to_contents functions using tab suggestions.</p>
<p>The first argument of a url_to_contents function is a URL, and is the only
argument that an Internet object, where these are used, will use.</p>
<p>Any extra arguments in url_to_contents functions are meant to be used with
their defaults or be set by currying (e.g. with <cite>functools.partial</cite>).</p>
<p>For example, one can use a custom <cite>response_func</cite> to get the data in a particular
way, and or wait for a page to load, etc.</p>
<dl class="py method">
<dt class="sig sig-object py" id="graze.base.url_to_contents.selenium_chrome">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">selenium_chrome</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url:</span> <span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">response_func=&lt;function</span> <span class="pre">_dflt_selenium_response_func&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">browser='Chrome'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#graze.base.url_to_contents.selenium_chrome" title="Link to this definition"></a></dt>
<dd><p>Function to get contents from a url, using selenium.</p>
<p>To work, selenium needs to be installed an setup (browser drivers (default is
Chrome)).</p>
<p>See: <a class="reference external" href="https://selenium-python.readthedocs.io/">https://selenium-python.readthedocs.io/</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> – The url to fetch</p></li>
<li><p><strong>response_func</strong> – The function to call on browser object to return html.
The default is attrgetter(‘page_source’) which just returns the page_source
attribute. But a custom function can be specified to check for status first,
or wait a number of seconds, etc.</p></li>
<li><p><strong>browser</strong> – <p>If a string, will use it as a <cite>selenium.webdriver</cite> attribute.
It’s the user’s responsibility to have the necessary drivers for this to
work. When using a string, a browser is made and closed once the page is
fetched. This is inefficient if many pages need to be fetched.
To reuse the same browser, or a browser with specific properties, one
can specify a already made browser.</p>
<p>``
b = selenium.webdriver.Chrome(…)
my_selenium = functools.partial(url_to_contents.selenium, browser=b)
``</p>
<p>When doing so, the browser is made/opened when <code class="docutils literal notranslate"><span class="pre">b</span></code> is made, and
won’t be closed by <code class="docutils literal notranslate"><span class="pre">url_to_contents.selenium</span></code>.
It’s up to the user to close it (<code class="docutils literal notranslate"><span class="pre">b.close()</span></code>) when they don’t need it
anymore.</p>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graze.base.url_to_contents.selenium_firefox">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">selenium_firefox</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url:</span> <span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">response_func=&lt;function</span> <span class="pre">_dflt_selenium_response_func&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">browser='Firefox'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#graze.base.url_to_contents.selenium_firefox" title="Link to this definition"></a></dt>
<dd><p>Function to get contents from a url, using selenium.</p>
<p>To work, selenium needs to be installed an setup (browser drivers (default is
Chrome)).</p>
<p>See: <a class="reference external" href="https://selenium-python.readthedocs.io/">https://selenium-python.readthedocs.io/</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> – The url to fetch</p></li>
<li><p><strong>response_func</strong> – The function to call on browser object to return html.
The default is attrgetter(‘page_source’) which just returns the page_source
attribute. But a custom function can be specified to check for status first,
or wait a number of seconds, etc.</p></li>
<li><p><strong>browser</strong> – <p>If a string, will use it as a <cite>selenium.webdriver</cite> attribute.
It’s the user’s responsibility to have the necessary drivers for this to
work. When using a string, a browser is made and closed once the page is
fetched. This is inefficient if many pages need to be fetched.
To reuse the same browser, or a browser with specific properties, one
can specify a already made browser.</p>
<p>``
b = selenium.webdriver.Chrome(…)
my_selenium = functools.partial(url_to_contents.selenium, browser=b)
``</p>
<p>When doing so, the browser is made/opened when <code class="docutils literal notranslate"><span class="pre">b</span></code> is made, and
won’t be closed by <code class="docutils literal notranslate"><span class="pre">url_to_contents.selenium</span></code>.
It’s up to the user to close it (<code class="docutils literal notranslate"><span class="pre">b.close()</span></code>) when they don’t need it
anymore.</p>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graze.base.url_to_contents.selenium_opera">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">selenium_opera</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url:</span> <span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">response_func=&lt;function</span> <span class="pre">_dflt_selenium_response_func&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">browser='Opera'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#graze.base.url_to_contents.selenium_opera" title="Link to this definition"></a></dt>
<dd><p>Function to get contents from a url, using selenium.</p>
<p>To work, selenium needs to be installed an setup (browser drivers (default is
Chrome)).</p>
<p>See: <a class="reference external" href="https://selenium-python.readthedocs.io/">https://selenium-python.readthedocs.io/</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> – The url to fetch</p></li>
<li><p><strong>response_func</strong> – The function to call on browser object to return html.
The default is attrgetter(‘page_source’) which just returns the page_source
attribute. But a custom function can be specified to check for status first,
or wait a number of seconds, etc.</p></li>
<li><p><strong>browser</strong> – <p>If a string, will use it as a <cite>selenium.webdriver</cite> attribute.
It’s the user’s responsibility to have the necessary drivers for this to
work. When using a string, a browser is made and closed once the page is
fetched. This is inefficient if many pages need to be fetched.
To reuse the same browser, or a browser with specific properties, one
can specify a already made browser.</p>
<p>``
b = selenium.webdriver.Chrome(…)
my_selenium = functools.partial(url_to_contents.selenium, browser=b)
``</p>
<p>When doing so, the browser is made/opened when <code class="docutils literal notranslate"><span class="pre">b</span></code> is made, and
won’t be closed by <code class="docutils literal notranslate"><span class="pre">url_to_contents.selenium</span></code>.
It’s up to the user to close it (<code class="docutils literal notranslate"><span class="pre">b.close()</span></code>) when they don’t need it
anymore.</p>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graze.base.url_to_contents.selenium_safari">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">selenium_safari</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url:</span> <span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">response_func=&lt;function</span> <span class="pre">_dflt_selenium_response_func&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">browser='Safari'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#graze.base.url_to_contents.selenium_safari" title="Link to this definition"></a></dt>
<dd><p>Function to get contents from a url, using selenium.</p>
<p>To work, selenium needs to be installed an setup (browser drivers (default is
Chrome)).</p>
<p>See: <a class="reference external" href="https://selenium-python.readthedocs.io/">https://selenium-python.readthedocs.io/</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> – The url to fetch</p></li>
<li><p><strong>response_func</strong> – The function to call on browser object to return html.
The default is attrgetter(‘page_source’) which just returns the page_source
attribute. But a custom function can be specified to check for status first,
or wait a number of seconds, etc.</p></li>
<li><p><strong>browser</strong> – <p>If a string, will use it as a <cite>selenium.webdriver</cite> attribute.
It’s the user’s responsibility to have the necessary drivers for this to
work. When using a string, a browser is made and closed once the page is
fetched. This is inefficient if many pages need to be fetched.
To reuse the same browser, or a browser with specific properties, one
can specify a already made browser.</p>
<p>``
b = selenium.webdriver.Chrome(…)
my_selenium = functools.partial(url_to_contents.selenium, browser=b)
``</p>
<p>When doing so, the browser is made/opened when <code class="docutils literal notranslate"><span class="pre">b</span></code> is made, and
won’t be closed by <code class="docutils literal notranslate"><span class="pre">url_to_contents.selenium</span></code>.
It’s up to the user to close it (<code class="docutils literal notranslate"><span class="pre">b.close()</span></code>) when they don’t need it
anymore.</p>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="graze.base.url_to_file_download">
<span class="sig-prename descclassname"><span class="pre">graze.base.</span></span><span class="sig-name descname"><span class="pre">url_to_file_download</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">url,</span> <span class="pre">filepath=None,</span> <span class="pre">*,</span> <span class="pre">url_to_contents:</span> <span class="pre">~collections.abc.Callable[[str],</span> <span class="pre">bytes</span> <span class="pre">|</span> <span class="pre">str]</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">url_to_contents.requests_get&gt;,</span> <span class="pre">write_contents_to_file:</span> <span class="pre">~collections.abc.Callable[[bytes</span> <span class="pre">|</span> <span class="pre">str,</span> <span class="pre">str],</span> <span class="pre">~typing.Any]</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">_write_to_file&gt;,</span> <span class="pre">url_to_path:</span> <span class="pre">~collections.abc.Callable</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">url_to_localpath&gt;,</span> <span class="pre">overwrite:</span> <span class="pre">bool</span> <span class="pre">|</span> <span class="pre">~collections.abc.Callable[[str,</span> <span class="pre">str],</span> <span class="pre">bool]</span> <span class="pre">=</span> <span class="pre">True,</span> <span class="pre">url_egress:</span> <span class="pre">~collections.abc.Callable[[str],</span> <span class="pre">str]</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">rootdir:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'/home/runner/graze',</span> <span class="pre">ensure_dirs:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">True,</span> <span class="pre">read_contents_of_file:</span> <span class="pre">~collections.abc.Callable[[str],</span> <span class="pre">bytes</span> <span class="pre">|</span> <span class="pre">str]</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">_read_file&gt;,</span> <span class="pre">return_func:</span> <span class="pre">~collections.abc.Callable[[str,</span> <span class="pre">bytes</span> <span class="pre">|</span> <span class="pre">str,</span> <span class="pre">str],</span> <span class="pre">~typing.Any]</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">return_contents&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/graze/base.html#url_to_file_download"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graze.base.url_to_file_download" title="Link to this definition"></a></dt>
<dd><p>Helper to make a url-to-file download functions (using partial).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> – The url to download from</p></li>
<li><p><strong>filepath</strong> – The local file path to download to. If None, will be derived from url</p></li>
<li><p><strong>url_to_contents</strong> – The function to get the contents from the url</p></li>
<li><p><strong>write_contents_to_file</strong> – The function to write the contents to a file</p></li>
<li><p><strong>url_to_path</strong> – The function to get the local file path from the url</p></li>
<li><p><strong>overwrite</strong> – Whether to overwrite the file if it exists.
Can be a boolean, or a function that takes a LocalPath and Url and returns
a boolean. For example, one can use this to only redownload and overwrite
the data if the file hasn’t been modified for X days (i.e. stale contents).</p></li>
<li><p><strong>url_egress</strong> – The function to call on the url before getting the contents from it.
This can, for example, be used to notify the user that data is being
downloaded, or to modify the url before fetching the contents (for example,
replacing the dl=0 in a dropbox url with dl=1).</p></li>
<li><p><strong>rootdir</strong> – The root directory where the file will be stored</p></li>
<li><p><strong>ensure_dirs</strong> – Whether to ensure the directories of the file exist</p></li>
<li><p><strong>read_contents_of_file</strong> – The function to read the contents of a file</p></li>
<li><p><strong>return_func</strong> – The function that determines what to return.
The default is to return the contents, but could be any function of
filepath, contents and url.</p></li>
</ul>
</dd>
</dl>
<p>A few recipes:</p>
<p>Download in chunks, and possibly to multiple files in a directory?
You can make <cite>url_to_contents</cite> return the url itself, and <cite>write_contents_to_file</cite>
do the work of opening url and filepath, and launch a get-chunk-write-chunk
process.</p>
<p>Need to decide how to download the url based on some characteristics of the url?
For example, if it’s a dropbox url with dl=0, change that to dl=1.
Put this in the url_to_contents logic.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="graze.base.url_to_filepath">
<span class="sig-prename descclassname"><span class="pre">graze.base.</span></span><span class="sig-name descname"><span class="pre">url_to_filepath</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rootdir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'/home/runner/graze'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">download</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/graze/base.html#url_to_filepath"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graze.base.url_to_filepath" title="Link to this definition"></a></dt>
<dd><p>Get the file path for the url.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rootdir</strong> – Where to store the contents locally.</p></li>
<li><p><strong>download</strong> – Controls when to download the file.
If None (default), will download only if “necessary”</p></li>
</ul>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">filepath</span> <span class="o">=</span> <span class="n">url_to_filepath</span><span class="p">(</span><span class="n">url_of_resource</span><span class="p">)</span> 
</pre></div>
</div>
<p>Use case:</p>
<p>Sometimes you need to specify a filepath as a resource for some python object.
For example, some font definition file, or configuration file, or such.
You can provide the file for the user, or can tell them where they can find
such a file if needed… or you can use the following for the best of both worlds.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">filepath</span> <span class="o">=</span> <span class="n">url_to_filepath</span><span class="p">(</span><span class="n">url_of_resource</span><span class="p">,</span> <span class="n">download</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> 
</pre></div>
</div>
<p>If you want to download the file whether it’s there or not, use:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">filepath</span> <span class="o">=</span> <span class="n">url_to_filepath</span><span class="p">(</span><span class="n">url_of_resource</span><span class="p">,</span> <span class="n">download</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> 
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="graze.base.url_to_localpath">
<span class="sig-prename descclassname"><span class="pre">graze.base.</span></span><span class="sig-name descname"><span class="pre">url_to_localpath</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../../_modules/graze/base.html#url_to_localpath"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graze.base.url_to_localpath" title="Link to this definition"></a></dt>
<dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">url_to_localpath</span><span class="p">(</span><span class="s1">&#39;http://www.example.com/subdir1/subdir2/file.txt&#39;</span><span class="p">)</span>
<span class="go">&#39;http/www.example.com_f/subdir1_f/subdir2_f/file.txt&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url_to_localpath</span><span class="p">(</span><span class="s1">&#39;https://www.example.com/subdir1/subdir2/file.txt/&#39;</span><span class="p">)</span>
<span class="go">&#39;https/www.example.com_f/subdir1_f/subdir2_f/file.txt&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url_to_localpath</span><span class="p">(</span><span class="s1">&#39;www.example.com/subdir1/subdir2/file.txt&#39;</span><span class="p">)</span>
<span class="go">&#39;www.example.com/subdir1_f/subdir2_f/file.txt&#39;</span>
</pre></div>
</div>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../graze.html" class="btn btn-neutral float-left" title="graze" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="migration_tools.html" class="btn btn-neutral float-right" title="graze.migration_tools" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright NO COPYRIGHT.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>